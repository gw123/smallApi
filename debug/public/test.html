<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <title> ws</title>
    <body>
        <input type="button" onclick="send()">
        <textarea id="msg_input">

        </textarea>
    </body>
    <script type="text/javascript">

    var ws = new WebSocket('ws://debug.xyt:4000');
    var requestData = {
            'pathinfo':'index/test',
            'content':[],
            'cookie':[]
    };
    ws.onopen = function(){
        console.log('open');
        var framedata = JSON.stringify(requestData);
        ws.send(framedata);
    }
    function send(){
        var value= document.getElementById('msg_input').value;
        console.log(value);
        requestData.data = value;
        var framedata = JSON.stringify(requestData);
        ws.send(framedata)
    }

    ws.onmessage = function(frame){
        var responseData = JSON.parse(frame.data)
        console.log(responseData)
        requestData.cookie = responseData.cookie;
    }

    ws.onerror = function(response ,errno){
        console.log(response)
    }
</script>
    </head>
</html>